import{a as H}from"./chunk-XYDF42MX.js";import{a as K}from"./chunk-ZRO2VLPL.js";import{A as R,B as N,C as F,y as V}from"./chunk-NGO3WZC3.js";import"./chunk-QEAK2XWR.js";import{$c as L,Eb as o,Fb as t,Kb as v,Lb as x,Mb as d,Ub as P,Vb as D,Wb as E,Wc as y,Xb as S,Yb as i,Zb as u,Zc as M,_b as p,_c as I,dc as T,eb as s,gd as B,hd as A,ia as w,lc as c,mc as g,na as C,nc as b,tb as h,va as f,vb as k,wa as _}from"./chunk-PYOKKVX2.js";import"./chunk-GAL4ENT6.js";var Q=["modalKonfirmasi"];function G(e,a){if(e&1&&(o(0,"div",16),i(1),t()),e&2){let n=a.data;s(),u(n.namaCustomer)}}function J(e,a){if(e&1&&(o(0,"div",16),i(1),c(2,"currency"),t()),e&2){let n=a.data;s(),u(g(2,1,n.amount,"IDR"))}}function q(e,a){if(e&1&&(o(0,"div",16),i(1),t()),e&2){let n=a.data;s(),u(n.tenor)}}function z(e,a){if(e&1&&(o(0,"div",16),i(1),c(2,"date"),t()),e&2){let n=a.data;s(),u(g(2,1,n.tanggalPengajuan,"short"))}}function O(e,a){if(e&1&&(o(0,"div",16),i(1),t()),e&2){let n=a.data;s(),u(n.status)}}function Y(e,a){if(e&1&&(o(0,"div",16),i(1),t()),e&2){let n=a.data;s(),u(n.catatanManager)}}function $(e,a){if(e&1){let n=v();o(0,"button",17),x("click",function(){let r=f(n).data,m=d();return _(m.openDisburseModal(r))}),i(1,"Disburse"),t()}}function U(e,a){e&1&&(o(0,"h3",18),i(1,"Konfirmasi Pencairan"),t())}function W(e,a){if(e&1&&(o(0,"div")(1,"p"),i(2,"Apakah Anda yakin ingin mencairkan pinjaman berikut?"),t(),o(3,"ul",20)(4,"li")(5,"strong"),i(6,"Nama Customer:"),t(),i(7),t(),o(8,"li")(9,"strong"),i(10,"Jumlah:"),t(),i(11),c(12,"currency"),t(),o(13,"li")(14,"strong"),i(15,"Tenor:"),t(),i(16),t(),o(17,"li")(18,"strong"),i(19,"Tanggal Pengajuan:"),t(),i(20),c(21,"date"),t(),o(22,"li")(23,"strong"),i(24,"Catatan Manager:"),t(),i(25),t()()()),e&2){let n=d(2);s(7),p(" ",n.selectedPengajuan.namaCustomer,""),s(4),p(" ",g(12,5,n.selectedPengajuan.amount,"IDR"),""),s(5),p(" ",n.selectedPengajuan.tenor," bulan"),s(4),p(" ",g(21,8,n.selectedPengajuan.tanggalPengajuan,"short"),""),s(5),p(" ",n.selectedPengajuan.catatanManager,"")}}function X(e,a){if(e&1&&h(0,W,26,11,"div",19),e&2){let n=d();k("ngIf",n.selectedPengajuan)}}function Z(e,a){if(e&1){let n=v();o(0,"button",21),x("click",function(){f(n);let r=d();return _(r.konfirmasiDisburse())}),i(1,"Ya, Cairkan"),t(),o(2,"button",22),x("click",function(){f(n),d();let r=S(13);return _(r.close())}),i(3,"Batal"),t()}}var pe=(()=>{let a=class a{constructor(){this.pengajuanService=w(H),this.http=w(A),this.pengajuans=[],this.rows=[],this.loading=!1,this.selectedPengajuan=null,this.cols=[{title:"Nama Customer",field:"namaCustomer"},{title:"Jumlah Pinjaman",field:"amount"},{title:"Tenor",field:"tenor"},{title:"Tanggal Pengajuan",field:"tanggalPengajuan"},{title:"Status",field:"status"},{title:"Catatan Manager",field:"catatanManager"},{title:"Aksi",field:"aksi"}]}ngOnInit(){this.fetchPengajuanDisburse()}fetchPengajuanDisburse(){this.loading=!0;let l=localStorage.getItem("token");if(!l){alert("Token tidak ditemukan. Anda harus login terlebih dahulu.");return}let r=new B().set("Authorization",`Bearer ${l}`);this.http.get("http://34.148.109.190/be/api/pengajuan/pending-backoffice",{headers:r}).subscribe({next:m=>{this.pengajuans=this.rows=m,this.loading=!1},error:m=>{console.error("Gagal mengambil data pengajuan untuk pencairan:",m),this.loading=!1}})}openDisburseModal(l){l?(this.selectedPengajuan=l,this.modalKonfirmasi.open()):console.error("Pengajuan tidak valid:",l)}konfirmasiDisburse(){if(!this.selectedPengajuan){alert("Tidak ada pengajuan yang dipilih.");return}this.pengajuanService.disbursePengajuan(this.selectedPengajuan.idPengajuan).subscribe({next:()=>{alert("Pengajuan berhasil dicairkan."),this.modalKonfirmasi.close(),this.fetchPengajuanDisburse()},error:l=>{console.error("Gagal mencairkan pengajuan:",l),alert("Terjadi kesalahan saat mencairkan pengajuan.")}})}};a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=C({type:a,selectors:[["app-pengajuan-disburse"]],viewQuery:function(r,m){if(r&1&&P(Q,5),r&2){let j;D(j=E())&&(m.modalKonfirmasi=j.first)}},standalone:!0,features:[T],decls:20,vars:4,consts:[["modalKonfirmasi",""],["modalHeader",""],["modalBody",""],["modalFooter",""],[1,"panel","mt-6","pb-0"],[1,"mb-5","text-lg","font-semibold","dark:text-white-light"],[1,"datatable"],["skin","whitespace-nowrap bh-table-hover","firstArrow",'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M13 19L7 12L13 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path opacity="0.5" d="M16.9998 19L10.9998 12L16.9998 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>',"lastArrow",'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M11 19L17 12L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path opacity="0.5" d="M6.99976 19L12.9998 12L6.99976 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>',"previousArrow",'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M15 5L9 12L15 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>',"nextArrow",'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 rtl:rotate-180"> <path d="M9 5L15 12L9 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>',3,"rows","columns","sortable","loading"],["slot","namaCustomer"],["slot","amount"],["slot","tenor"],["slot","tanggalPengajuan"],["slot","status"],["slot","catatanManager"],["slot","aksi"],[1,"modal-top","w-[50%]"],[1,"font-semibold"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"text-lg","font-semibold","mb-4"],[4,"ngIf"],[1,"mt-4","space-y-2"],[1,"btn","btn-success","mr-2",3,"click"],[1,"btn","btn-outline-danger",3,"click"]],template:function(r,m){r&1&&(o(0,"div",4)(1,"h5",5),i(2,"List Pengajuan Siap Dicairkan"),t(),o(3,"div",6)(4,"ng-datatable",7),h(5,G,2,1,"ng-template",8)(6,J,3,4,"ng-template",9)(7,q,2,1,"ng-template",10)(8,z,3,4,"ng-template",11)(9,O,2,1,"ng-template",12)(10,Y,2,1,"ng-template",13)(11,$,2,0,"ng-template",14),t()()(),o(12,"ngx-custom-modal",15,0),h(14,U,2,0,"ng-template",null,1,b)(16,X,1,1,"ng-template",null,2,b)(18,Z,4,0,"ng-template",null,3,b),t()),r&2&&(s(4),k("rows",m.rows)("columns",m.cols)("sortable",!0)("loading",m.loading))},dependencies:[L,y,I,M,V,F,N,R,K],encapsulation:2});let e=a;return e})();export{pe as PengajuanDisburseComponent};
