import{a as N}from"./chunk-5QELH4DX.js";import{a as G}from"./chunk-YSCUJSTB.js";import{i as T}from"./chunk-E3LZAFS3.js";import{Be as D,Ja as j,Qa as B,r as W,ub as L}from"./chunk-6EYGSNKD.js";import"./chunk-3UXZUV3X.js";import{d as A}from"./chunk-RGZT2HLU.js";import{a as R}from"./chunk-ZRO2VLPL.js";import{d as M,g as I,j as V}from"./chunk-NGO3WZC3.js";import"./chunk-QEAK2XWR.js";import{$b as b,Eb as n,Fb as i,Gb as u,Kb as h,Lb as g,Mb as c,Xb as C,Yb as o,Zb as x,_b as w,ac as _,bc as P,dc as E,eb as a,fb as f,na as v,nc as y,tb as k,va as d,wa as p}from"./chunk-PYOKKVX2.js";import"./chunk-GAL4ENT6.js";function H(l,m){l&1&&(n(0,"div"),o(1,"Ganti Password"),i())}function K(l,m){if(l&1){let s=h();n(0,"div",30)(1,"label",31),o(2,"Password Lama"),i(),n(3,"input",32),P("ngModelChange",function(e){d(s);let t=c();return _(t.oldPassword,e)||(t.oldPassword=e),p(e)}),i()(),n(4,"div",30)(5,"label",31),o(6,"Password Baru"),i(),n(7,"input",33),P("ngModelChange",function(e){d(s);let t=c();return _(t.newPassword,e)||(t.newPassword=e),p(e)}),i()(),n(8,"div",30)(9,"label",31),o(10,"Konfirmasi Password"),i(),n(11,"input",34),P("ngModelChange",function(e){d(s);let t=c();return _(t.confirmPassword,e)||(t.confirmPassword=e),p(e)}),i()()}if(l&2){let s=c();a(3),b("ngModel",s.oldPassword),a(4),b("ngModel",s.newPassword),a(4),b("ngModel",s.confirmPassword)}}function O(l,m){if(l&1){let s=h();n(0,"button",35),g("click",function(){d(s),c();let e=C(52);return p(e.close())}),o(1,"Batal"),i(),n(2,"button",36),g("click",function(){d(s);let e=c();return p(e.changePassword())}),o(3,"Simpan"),i()}}var oe=(()=>{let m=class m{constructor(r,e,t){this.employeeService=r,this.authService=e,this.router=t,this.employee=null,this.branch=null,this.oldPassword="",this.newPassword="",this.confirmPassword="",this.modalChangePassword=null}ngOnInit(){let r=localStorage.getItem("employeeId");r?(this.employeeService.getEmployeeById(r).subscribe({next:e=>this.employee=e,error:e=>console.error("Gagal mengambil data employee:",e)}),this.employeeService.getMyBranch().subscribe({next:e=>this.branch=e,error:e=>console.error("Gagal mengambil data cabang:",e)})):console.error("employeeId tidak ditemukan di localStorage")}openChangePasswordModal(r){this.oldPassword="",this.newPassword="",this.confirmPassword="",this.modalChangePassword=r,r.open()}changePassword(){if(!this.oldPassword||!this.newPassword||!this.confirmPassword){alert("Semua field harus diisi!");return}if(this.newPassword!==this.confirmPassword){alert("Password baru dan konfirmasi tidak cocok!");return}this.authService.changePassword(this.oldPassword,this.newPassword).subscribe({next:()=>{alert("Password berhasil diubah!"),this.modalChangePassword&&this.modalChangePassword.close(),this.oldPassword="",this.newPassword="",this.confirmPassword=""},error:r=>{alert("Gagal mengubah password: "+(r.error?.message||r.statusText))}})}logout(){this.authService.logout().subscribe({next:()=>{localStorage.clear(),this.router.navigate(["/login"])},error:r=>{alert("Logout gagal: "+(r.error?.message||r.statusText))}})}};m.\u0275fac=function(e){return new(e||m)(f(G),f(N),f(A))},m.\u0275cmp=v({type:m,selectors:[["app-profil-akun"]],standalone:!0,features:[E],decls:59,vars:7,consts:[["modalChangePassword",""],["modalHeader",""],["modalBody",""],["modalFooter",""],[1,"flex","space-x-2","rtl:space-x-reverse"],["href","javascript:;",1,"text-primary","hover:underline"],[1,"before:content-['/']","ltr:before:mr-2","rtl:before:ml-2"],[1,"pt-5"],[1,"mb-5","grid","grid-cols-1","gap-5","lg:grid-cols-3","xl:grid-cols-4"],[1,"panel"],[1,"mb-5","flex","items-center","justify-between"],[1,"text-lg","font-semibold","dark:text-white-light"],[1,"mb-5"],[1,"flex","flex-col","items-center","justify-center"],["src","/assets/images/profile.png","alt","",1,"mb-5","h-24","w-24","rounded-full","object-cover"],[1,"text-xl","font-semibold","text-primary"],[1,"m-auto","mt-5","flex","max-w-[160px]","flex-col","space-y-4","font-semibold","text-white-dark"],[1,"flex","items-center","gap-2"],[1,"shrink-0"],["href","javascript:;",1,"flex","items-center","gap-2"],[1,"h-5","w-5","shrink-0"],[1,"truncate","text-primary"],[1,"text-center"],["type","button",1,"btn","btn-primary","btn-sm","mt-2","me-2",2,"width","150px",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","mt-2",2,"width","150px",3,"click"],[1,"panel","lg:col-span-2","xl:col-span-3"],[1,"bg-white","dark:bg-[#1e293b]","rounded-2xl","shadow-md","p-6"],[1,"text-xl","font-bold","text-primary","mb-2"],[1,"text-gray-700","dark:text-white-light","space-y-1"],[1,"font-semibold"],[1,"mb-4"],[1,"block","mb-1"],["type","password","placeholder","Masukkan password lama",1,"border","p-2","w-full",3,"ngModelChange","ngModel"],["type","password","placeholder","Masukkan password baru",1,"border","p-2","w-full",3,"ngModelChange","ngModel"],["type","password","placeholder","Ulangi password baru",1,"border","p-2","w-full",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline-danger","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){if(e&1){let S=h();n(0,"div")(1,"ul",4)(2,"li")(3,"a",5),o(4,"Users"),i()(),n(5,"li",6)(6,"span"),o(7,"Profile"),i()()(),n(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"h5",11),o(13,"Profile"),i()(),n(14,"div",12)(15,"div",13),u(16,"img",14),n(17,"p",15),o(18),i()(),n(19,"ul",16)(20,"li",17),u(21,"icon-coffee",18),o(22),i(),n(23,"li",17),u(24,"icon-calendar",18),o(25),i(),n(26,"li",17),u(27,"icon-map-pin",18),o(28),i(),n(29,"li")(30,"a",19),u(31,"icon-mail",20),n(32,"span",21),o(33),i()(),n(34,"div",22)(35,"button",23),g("click",function(){d(S);let U=C(52);return p(t.openChangePasswordModal(U))}),o(36," Change Password "),i(),n(37,"button",24),g("click",function(){return d(S),p(t.logout())}),o(38," Logout "),i()()()()()(),n(39,"div",25)(40,"div",12)(41,"h5",11),o(42,"Informasi Cabang"),i()(),n(43,"div",26)(44,"h6",27),o(45),i(),n(46,"div",28)(47,"p")(48,"span",29),o(49,"Alamat:"),i(),o(50),i()()()()()(),n(51,"ngx-custom-modal",null,0),k(53,H,2,0,"ng-template",null,1,y)(55,K,12,3,"ng-template",null,2,y)(57,O,4,0,"ng-template",null,3,y),i()()}e&2&&(a(18),x(t.employee==null?null:t.employee.nama_lengkap),a(4),w(" ",t.employee==null?null:t.employee.role," "),a(3),w(" ",t.employee==null?null:t.employee.nip," "),a(3),w(" ",t.employee==null?null:t.employee.namaCabang," "),a(5),x(t.employee==null?null:t.employee.email),a(12),x(t.branch==null?null:t.branch.namaCabang),a(5),w(" ",t.branch==null?null:t.branch.alamat," "))},dependencies:[D,M,I,V,j,B,W,L,R],data:{animation:[T]}});let l=m;return l})();export{oe as ProfilAkunComponent};
